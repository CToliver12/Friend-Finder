<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>FriendFinder</title>

	<!--Latest compiled and minified CSS & JS-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>

    <!--Linking CSS Stylesheet-->
	<link rel = "stylesheet" type="text/css" href="style.css">

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css"></link>

    <!--Chosen -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>
<body>

	<div class="container">
		
			<h2> Survey Question</h2>
			<hr>

			<h3><strong>About You</strong></h3>
			<h4>Name (Required) </h4>
			<input type="text" name"" id="name" class="form-control" required=>


			<h4>Link to Photo Image (Required...Picture in your favorite outfit!)</h4>
			<input type="text" name="" id="photo" class="form-control" required>

			<hr>

			<h3><strong>Question 1 </strong></h3>
			<h4>I like to be photo ready at all times.</h4>
			<select data-placeholder="" class="chosen-select" id="q1">
				<option value=""></option>
		<option value="1">1 (Stongly Disagree)</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5 (Strongly Agree)</option>
	</select>


			<h3><strong>Question 2 </strong></h3>
			<h4>A LBD is always my go-to when I'm in a pinch.</h4>
			<select data-placeholder="" class="chosen-select" id="q2">
				<option value=""></option>
		<option value="1">1 (Stongly Disagree)</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5 (Strongly Agree)</option>
	</select>



			<h3><strong>Question 3 </strong></h3>
			<h4>A classic tee, leggings, and chucks are my fav.</h4>
			<select data-placeholder="" class="chosen-select" id="q3">
				<option value=""></option>
		<option value="1">1 (Stongly Disagree)</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5 (Strongly Agree)</option>
	</select>


			<h3><strong>Question 4 </strong></h3>
			<h4>Accessories matter.</h4>
			<select data-placeholder="" class="chosen-select" id="q4">
				<option value=""></option>
		<option value="1">1 (Stongly Disagree)</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5 (Strongly Agree)</option>
	</select>


			<h3><strong>Question 5 </strong></h3>
			<h4>My closet is monochromatic.</h4>
			<select data-placeholder="" class="chosen-select" id="q5">
				<option value=""></option>
		<option value="1">1 (Stongly Disagree)</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5 (Strongly Agree)</option>
	</select>


	<h3><strong>Question 6 </strong></h3>
			<h4>My concept of style is "anything I don't have to iron."</h4>
			<select data-placeholder="" class="chosen-select" id="q6">
				<option value=""></option>
		<option value="1">1 (Stongly Disagree)</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5 (Strongly Agree)</option>
	</select>

	
	<h3><strong>Question 7 </strong></h3>
			<h4>Pinterest is my best friend when it comes to finding what's "trendy".</h4>
			<select data-placeholder="" class="chosen-select" id="q7">
				<option value=""></option>
		<option value="1">1 (Stongly Disagree)</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5 (Strongly Agree)</option>
	</select>


	<h3><strong>Question 8 </strong></h3>
			<h4>I like to go from day to night in the same outfit.</h4>
			<select data-placeholder="" class="chosen-select" id="q8">
				<option value=""></option>
		<option value="1">1 (Stongly Disagree)</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5 (Strongly Agree)</option>
	</select>


	<h3><strong>Question 9 </strong></h3>
			<h4>I will invest money in good jeans.</h4>
			<select data-placeholder="" class="chosen-select" id="q9">
				<option value=""></option>
		<option value="1">1 (Stongly Disagree)</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5 (Strongly Agree)</option>
	</select>

	<h3><strong>Question 10 </strong></h3>
			<h4>I match my clothes at night before I go to bed. </h4>
			<select data-placeholder="" class="chosen-select" id="q10">
				<option value=""></option>
		<option value="1">1 (Stongly Disagree)</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5 (Strongly Agree)</option>
	</select>

		<br>
		<br>

		<!--Submit button-->
		<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="glyphicon glyphicon-credit-card" area-hidden="true"></i> Submit </button>

		<hr>
		<footer class="footer">
			<div class="container">
				<div class="text-center">
					<p><a href= "/api/friends"> API Outfit Details</a> | <a href="https://github.com/CToliver12/Friend-Finder">Github Repo</a></p>
			</div>
		</footer>

	</div>
	<!-- Modal -->
	<div id="resultsModal" class="modal fade" role="dialog">
		<div class="modal-dialog">

		<!--Modal content-->
		<div class= "modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h2 class="modal-title"><strong>Best Match</strong></h2>
			</div>
			<div class="modal-body">
			<h2 id="matchName"></h2>
			<img id="matchImg" src="" alt="">
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<!--This section is sending form data to server-->
<script type="text/javascript">

		//Chosen CSS 
	var config = {
		'.chosen-select':{},
		'.chosen-select-deselect'	:{
			allow_single_deselect: true
		},
		'.chosen-select-no-single':{
			disable_search_threshold:10
		},
		'.chosen-select-no-results':{
			no_results_text:'Oops, nothing found!'
		},
		'.chosen-select-width':{
			width: "95%"}
	};//end of config

	for(var selector in config) {
		$(selector).chosen(config[selector]);
	}//end of var selector

	//Capture the form inputs/click event 
	$("#submit").on("click", function(){
		event.preventDefault(); 

		//Form validation
		function validateForm() {
			var isValid = true;
			$(".form-control").each(function(){
				if($(this).val() === "") {
					isValid = false;
				}
			});

			$(".chosen-select").each(function() {
				if( $(this).val() === ""){
						isValid = false
				}
			})
			return isValid;
		}

		//If all required fields are filled
		if(validateForm()){

			//Create an opject for the user's data 
		var userData = {
						name: $("#name").val(),
						photo: $("#photo").val(),
						scores: [$("#q1").val(), $("q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), 
									$("#q6").val(), $("q7").val(), $("q8").val(), $("q9").val(), $("q10").val(),
								] 
						};



		//Grab the URL from the website 
		var currentURL = window.location.orgin; 
	
	

		//AJAX post the data to the friends API
		$.post("/api/friends", userData,
			function(data){
				
	
				//Grab the result from the AJAX post so that the best match's name and photo are displayed 

				//Most compatilble friend name 
				$("#matchName").text(data.name);

				//Most compatible friend photo 
				$('#matchImg').attr("src", data.photo);

				//She the modal wiht the best match 
				$("#resultsModal").modal('toggle');
		

				//Clear the form when submitting
				$("#name").val("");
				$("#photo").val("");
				$("q1").val("");
				$("q2").val("");
				$("q3").val("");
				$("q4").val("");
				$("q5").val("");
				$("q6").val("");
				$("q7").val("");
				$("q8").val("");
				$("q9").val("");
				$("q10").val("");
			});
		}
		else
		{
			alert("Please fill out all fields before submitting!");
		}

		return false;
		
		});

</script>

</body>
</html>